import{R as h,d as N,a as x,j as s,L as f,u as v,r as g,B as p}from"./index-D9AcpMqu.js";import{A as i,v as w,C as y,S as b}from"./SideCard-D5Y2Hzzj.js";import{e as S}from"./equalAtom-PdIFVlGp.js";/* empty css                       */function E({handleSubmit:n}){const l=h(N),[a,r]=x(S);function e(){const t=document.getElementsByName("password")[0].value,o=document.getElementsByName("confirm")[0].value;r(t==o)}return s.jsxs("div",{className:l?"signup darkMode":"signup",children:[s.jsx("div",{className:"clip"}),s.jsxs("div",{className:"signup-header",children:[s.jsx("div",{className:"logo"}),s.jsxs("div",{className:"title",children:[s.jsx("div",{className:"slot1"}),s.jsx("div",{className:"slot2"})]})]}),s.jsx("hr",{className:"line"}),s.jsxs("form",{className:"signup-form",onSubmit:t=>n(t),children:[s.jsx("div",{className:"inputs",children:s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"roll-label",children:"LDAP ID"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(i,{placeholder:"Enter you LDAP ID (eg. 21b5745)",name:"roll",id:"roll",type:"text",maxLength:"7"})})]}),s.jsx("hr",{className:"line"}),s.jsx("p",{className:"user-label",children:"Username"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(i,{placeholder:"Username",name:"username",id:"username",type:"text",autoComplete:"name"})})]}),s.jsx("hr",{className:"line"}),s.jsx("p",{className:"pass-label",children:"Password"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(i,{placeholder:"Make a strong password",name:"password",id:"password",type:"password",autoComplete:"new-password"})})]}),s.jsx("hr",{className:"line"}),s.jsx("div",{className:"confirm-label",children:"Confirm Password"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(i,{placeholder:"Re-enter your password",name:"confirm",id:"confirm",type:"password",autoComplete:"new-password",onChange:e})})]}),s.jsx("hr",{className:"line"})]})}),s.jsx("div",{className:"signup-submit-div",children:s.jsx("button",{type:"submit",className:l?"signup-submit dark":"signup-submit",id:a?"":"prohibited",children:"SIGN UP"})}),s.jsx("hr",{className:"line"}),s.jsxs("div",{className:"text-div",children:[s.jsx("p",{className:"text",children:"Already have an Account?"}),s.jsx(f,{to:"/signin",children:"Log In"})]})]})]})}function P(){const n=v(),[l,a]=x(w);g.useEffect(()=>{fetch(`${p}/cookie`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"}}).then(async function(e){await e.json(),e.status==200&&n("/feed")})},[]);function r(e){const t=document.getElementsByName("password")[0].value,o=document.getElementsByName("confirm")[0].value;if(e.preventDefault(),t==o){const d=new FormData(e.target),j={username:d.get("username"),password:d.get("password"),roll:d.get("roll")};fetch(`${p}/signup`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(j)}).then(async function(m){const u=m.status,c=await m.json();u==200?(n("/profile/details"),a({username:!0,password:!0,roll:!0}),localStorage.setItem("userId",c.userId)):u==409&&(c.data=="username"?(a({username:!1,password:!0,roll:!0}),alert("Username Taken")):c.data=="roll"&&(a({username:!0,password:!0,roll:!1}),alert("Roll Number Taken")))})}}return s.jsxs("div",{className:"main",children:[s.jsx(y,{id:"signup-card",children:s.jsx(E,{handleSubmit:r})}),s.jsx(b,{title:"SIGNUP"})]})}export{P as default};
