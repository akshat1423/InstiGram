import{R as x,d as j,j as s,L as p,u as h,a as N,r as v,B as d}from"./index-D9AcpMqu.js";import{A as o,v as f,C as g,S as w}from"./SideCard-D5Y2Hzzj.js";/* empty css                       */import"./equalAtom-PdIFVlGp.js";function y({handleSubmit:a}){const t=x(j);return s.jsxs("div",{className:t?"login darkMode":"login",children:[s.jsx("div",{className:"clip"}),s.jsxs("div",{className:"login-header",children:[s.jsx("div",{className:"logo"}),s.jsxs("div",{className:"title",children:[s.jsx("div",{className:"slot1"}),s.jsx("div",{className:"slot2"})]})]}),s.jsx("hr",{className:"line"}),s.jsxs("form",{className:"login-form",onSubmit:i=>a(i),children:[s.jsx("div",{className:"inputs",children:s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"username-label",children:"Username"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(o,{defaultValue:"",placeholder:"Enter your Username",name:"username",id:"username",type:"text",autoComplete:"name"})})]}),s.jsx("hr",{className:"line"}),s.jsx("p",{className:"password-label",children:"Password"}),s.jsxs("div",{className:"input",children:[s.jsx("div",{className:"arrow"}),s.jsx("div",{className:"text-input",children:s.jsx(o,{defaultValue:"",placeholder:"Enter your Password",name:"password",id:"password",type:"password",autoComplete:"new-password"})})]}),s.jsx("hr",{className:"line"})]})}),s.jsx("div",{className:"login-submit-div",children:s.jsx("button",{type:"submit",className:t?"login-submit dark":"login-submit",children:"LOGIN"})}),s.jsx("hr",{className:"line"}),s.jsxs("div",{className:"text-div",children:[s.jsx("p",{className:"text",children:"New to Instigram?"}),s.jsx(p,{to:"/",children:"Sign Up"})]})]})]})}function L(){const a=h(),[t,i]=N(f);v.useEffect(()=>{fetch(`${d}/cookie`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"}}).then(async function(e){await e.json(),e.status==200&&a("/feed")})},[]);function c(e){const n=new FormData(e.target),m={username:n.get("username"),password:n.get("password")};e.preventDefault(),fetch(`${d}/signin`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(m)}).then(async function(r){const l=r.status,u=await r.json();l==200?(a("/feed"),i({username:!0,password:!0,roll:!0}),localStorage.setItem("userId",u.userId)):l==409&&alert("Wrong Username or Password")})}return s.jsxs("div",{className:"main",children:[s.jsx(g,{id:"login-card",children:s.jsx(y,{handleSubmit:c})}),s.jsx(w,{title:"LOGIN"})]})}export{L as default};
