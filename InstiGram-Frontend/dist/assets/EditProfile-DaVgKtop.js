import{R as l,d as h,u as f,j as e,f as j,r as y,B as u}from"./index-D9AcpMqu.js";import{i as b}from"./imageAtom-EX3fMRaZ.js";import{I as v,S as d}from"./SelectInput-2E8gJ46G.js";import{P as N,m as p}from"./PopupCard-D7E3FFse.js";import{d as x}from"./detailsAtom-Dtq-BU6S.js";/* empty css                  */function S({handleSubmit:n}){const t=l(x),s=l(h),r=f();return e.jsx(e.Fragment,{children:e.jsxs(N,{children:[e.jsx("div",{className:"details-title",children:"Edit Profile"}),e.jsx("div",{className:"edit-close-button-div",onClick:()=>r(-1)}),e.jsxs("form",{className:"edit-form",onSubmit:a=>n(a),children:[e.jsx("label",{htmlFor:"image",className:"image-edit-label",children:"Edit picture"}),e.jsx(v,{name:"image",id:"image"}),e.jsxs("div",{className:"edit-form-inputs",children:[e.jsx("label",{htmlFor:"username-edit",className:"username-label",children:"Username: "}),e.jsx("input",{type:"text",id:"username-edit",className:"username-edit",name:"username",defaultValue:t.username,required:!0}),e.jsx("label",{htmlFor:"bio",className:"bio-label dark",id:"edit-bio-label",children:"Bio: "}),e.jsx("textarea",{name:"bio",id:"bio",cols:"30",rows:"10",className:"edit-bio dark",defaultValue:t.bio}),e.jsx(d,{placeholder:"Department: ",name:"department",id:"department",type:"text",defaultValue:t.department}),e.jsxs("div",{className:"details",children:[e.jsx(d,{placeholder:"Degree: ",name:"degree",id:"degree",type:"text",defaultValue:t.degree}),e.jsx(d,{placeholder:"Year: ",name:"year",id:"year",type:"text",defaultValue:t.gradYear})]}),e.jsx("div",{className:"submit-div",children:e.jsx("button",{type:"submit",className:"edit-submit "+(s?"dark":""),children:"Submit"})})]})]})]})})}const I={initial:{y:"100vh",opacity:0},animate:{opacity:1,y:0},exit:{y:"100vh"}},k={initial:{opacity:0},animate:{opacity:1,delay:.5},exit:{opacity:0}};function w(){const n=l(b),t=j(x),s=f();y.useEffect(()=>{fetch(`${u}/cookie`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"}}).then(async function(a){const i=a.status;await a.json(),i==401&&s("/signin")})},[]);function r(a){a.preventDefault();const i=new FormData(a.target),m={userId:localStorage.getItem("userId"),username:i.get("username"),bio:i.get("bio"),department:i.get("department"),degree:i.get("degree"),year:i.get("year"),profileImage:n};fetch(`${u}/profile/edit`,{method:"POST",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(m)}).then(async function(c){const o=c.status,g=await c.json();console.log(g),o==200?(t(m),s("/feed")):o==409?alert("Username Taken"):o==401&&s("/signin")})}return e.jsx(p.div,{className:"edit-overlay",variants:k,initial:"initial",animate:"animate",exit:"exit",children:e.jsx(p.div,{className:"edit-animate-container",variants:I,children:e.jsx(S,{handleSubmit:r})})})}export{w as default};
